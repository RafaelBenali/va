# =============================================================================
# TNSE - Telegram News Search Engine
# Environment Configuration Template
# =============================================================================
# Copy this file to .env and update the values for your environment.
# NEVER commit the .env file to version control!
# =============================================================================

# -----------------------------------------------------------------------------
# Application Settings
# -----------------------------------------------------------------------------
APP_NAME=tnse
APP_ENV=development
# Options: development, staging, production
DEBUG=true
LOG_LEVEL=DEBUG
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL

# -----------------------------------------------------------------------------
# Server Settings
# -----------------------------------------------------------------------------
HOST=0.0.0.0
PORT=8000
WORKERS=1
# Increase workers in production (2-4 per CPU core)

# -----------------------------------------------------------------------------
# Database Configuration (PostgreSQL)
# -----------------------------------------------------------------------------
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=tnse
POSTGRES_USER=tnse_user
POSTGRES_PASSWORD=change_me_in_production
# Full connection URL (alternative to individual settings)
# DATABASE_URL=postgresql://tnse_user:change_me_in_production@localhost:5432/tnse

# -----------------------------------------------------------------------------
# Redis Configuration
# -----------------------------------------------------------------------------
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=
# Full connection URL (alternative to individual settings)
# REDIS_URL=redis://localhost:6379/0

# -----------------------------------------------------------------------------
# Celery Configuration (Task Queue)
# -----------------------------------------------------------------------------
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2

# -----------------------------------------------------------------------------
# Telegram Bot Configuration
# -----------------------------------------------------------------------------
# Get your bot token from @BotFather on Telegram
TELEGRAM_BOT_TOKEN=
# Comma-separated list of Telegram user IDs allowed to use the bot
# Leave empty for unrestricted access
ALLOWED_TELEGRAM_USERS=

# Bot Mode Settings
# Use polling (true) for development, webhooks (false) for production
BOT_POLLING_MODE=true
# Webhook URL (required if BOT_POLLING_MODE=false)
# TELEGRAM_WEBHOOK_URL=https://your-domain.com/webhook

# -----------------------------------------------------------------------------
# Telegram API Configuration (MTProto - for channel access)
# -----------------------------------------------------------------------------
# Get these from https://my.telegram.org/apps
TELEGRAM_API_ID=
TELEGRAM_API_HASH=
# Phone number associated with your Telegram account (for session)
TELEGRAM_PHONE=

# -----------------------------------------------------------------------------
# LLM API Configuration (Optional - for semantic analysis mode)
# -----------------------------------------------------------------------------
# OpenAI
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4-turbo-preview

# Anthropic
ANTHROPIC_API_KEY=
ANTHROPIC_MODEL=claude-3-sonnet-20240229

# LLM Mode Settings
LLM_ENABLED=false
# Set to true to enable LLM-powered semantic analysis
LLM_PROVIDER=openai
# Options: openai, anthropic

# -----------------------------------------------------------------------------
# Security Settings
# -----------------------------------------------------------------------------
SECRET_KEY=change_this_to_a_random_string_in_production
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"

# Encryption key for sensitive data at rest
ENCRYPTION_KEY=
# Generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"

# -----------------------------------------------------------------------------
# Metrics and Monitoring
# -----------------------------------------------------------------------------
ENABLE_METRICS=true
METRICS_PORT=9090

# -----------------------------------------------------------------------------
# Content Processing Settings
# -----------------------------------------------------------------------------
# Time window for content collection (in hours)
CONTENT_WINDOW_HOURS=24
# Interval for content collection jobs (in minutes)
COLLECTION_INTERVAL_MINUTES=15
# Maximum channels to process per batch
MAX_CHANNELS_PER_BATCH=50

# -----------------------------------------------------------------------------
# Search Settings
# -----------------------------------------------------------------------------
# Maximum results per search query
MAX_SEARCH_RESULTS=100
# Cache TTL for search results (in seconds)
SEARCH_CACHE_TTL=300

# -----------------------------------------------------------------------------
# Reaction Score Weights (for metrics-only mode)
# -----------------------------------------------------------------------------
REACTION_WEIGHT_HEART=2.0
REACTION_WEIGHT_THUMBS_UP=1.0
REACTION_WEIGHT_FIRE=1.5
REACTION_WEIGHT_CLAP=1.0
REACTION_WEIGHT_THINKING=0.5
REACTION_WEIGHT_THUMBS_DOWN=-1.0
REACTION_WEIGHT_DEFAULT=1.0
